(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[222],{9213:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkout",function(){return r(4374)}])},9452:function(e,t,r){"use strict";var n=r(9669),a=r.n(n),i=r(7137),s=a().create({headers:{Authorization:!i.s&&localStorage.getItem("token")&&null!==localStorage.getItem("token")?"bearer ".concat(localStorage.getItem("token")||"".replaceAll('"',"").toString()):""}});t.Z=s},6410:function(e,t,r){"use strict";var n=r(5893);r(7294);t.Z=function(e){var t=e.fullScreen,r=void 0!==t&&t;return(0,n.jsx)("div",{className:" ".concat(r?"h-screen":"h-full"," h-full flex justify-center items-center "),children:(0,n.jsxs)("div",{className:"flex flex-col justify-center items-center w-full h-full min-h-48 text-primary",children:[(0,n.jsx)("div",{className:"flex items-center justify-center space-x-2 animate-bounce",children:(0,n.jsx)("div",{className:"spinner-border animate-spin inline-block w-12 h-12 border-4 border-t-white rounded-full",role:"status"})}),(0,n.jsx)("div",{className:" animate-ping ",children:"loading ..."})]})})}},2970:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(5893),a=r(7294),i=r(4708),s=r(6455);function o(e){var t=e.title,r=e.onSave,o=e.address,l=e.isBilling,u=(0,a.useState)(""),c=u[0],d=u[1],f=(0,a.useState)(""),v=f[0],h=f[1],m=(0,a.useState)(""),x=m[0],p=m[1],y=(0,a.useState)(""),j=y[0],g=y[1],b=(0,a.useState)(""),w=b[0],S=b[1];return(0,a.useEffect)((function(){o&&o&&(d(null===o||void 0===o?void 0:o.country),h(null===o||void 0===o?void 0:o.city),p(null===o||void 0===o?void 0:o.street),g(null===o||void 0===o?void 0:o.postcode),S(null===o||void 0===o?void 0:o.note))}),[o]),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("h1",{className:"text-xl text-center mt-2 mb-2 text-primary ",children:t}),(0,n.jsx)(s.Z,{label:"Country",name:"Country_data",placeholder:"Your Country",required:!0,type:"text",onChange:function(e){return d(e.target.value)},value:c})," ",(0,n.jsx)(s.Z,{label:"City",name:"City_data",placeholder:"Your City",required:!0,type:"text",onChange:function(e){return h(e.target.value)},value:v}),(0,n.jsx)(s.Z,{label:"Street",name:"Street_data",placeholder:"Your Street",required:!0,type:"text",onChange:function(e){return p(e.target.value.toString())},value:x}),(0,n.jsx)(s.Z,{label:"Postcode",name:"Postcode_data",placeholder:"Your Postcode",required:!0,type:"text",onChange:function(e){return g(e.target.value)},value:j}),(0,n.jsx)(s.Z,{label:"Note",name:"Note_data",placeholder:"Your Note",required:!0,type:"text",onChange:function(e){return S(e.target.value)},value:w}),(0,n.jsx)("div",{className:"flex w-full justify-between items-center mt-4",children:(0,n.jsx)(i.Z,{type:"button",onClick:function(){r({id:void 0,name:void 0,address:void 0,country:c,city:v,street:x,postcode:j,note:w,isBilling:l})},size:"large",children:"Save"})})]})}},4374:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return I}});var n=r(5893),a=r(7294),i=r(2553),s=r(5345),o=r(4051),l=r.n(o),u=r(3072),c=r(9452);function d(e,t,r,n,a,i,s){try{var o=e[i](s),l=o.value}catch(u){return void r(u)}o.done?t(l):Promise.resolve(l).then(n,a)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function s(e){d(i,n,a,s,o,"next",e)}function o(e){d(i,n,a,s,o,"throw",e)}s(void 0)}))}}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,n=[{key:"register",value:function(e){return c.Z.post(u.j.auth.register,e).then((function(e){return e.data})).catch((function(e){return e}))}},{key:"saveAddress",value:function(e){return f(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",c.Z.post(u.j.address.user,e).then((function(e){return e.data})));case 1:case"end":return t.stop()}}),t)})))()}}],(r=null)&&v(t.prototype,r),n&&v(t,n),e}();h.getAllAddresses=f(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get(u.j.address.user);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));var m=r(8767),x=r(6501),p=r(3750),y=r(2645),j=r(6410);var g=function(e){var t=e.onSelect,r=e.selected,a=function(){var e=(0,m.useQuery)("addresses",h.getAllAddresses),t=e.data,r=e.isLoading,n=e.isError;return{data:localStorage.getItem("token")?t:[],isLoading:r,isError:n}}(),i=a.data;return a.isLoading?(0,n.jsx)(j.Z,{}):(0,n.jsx)(n.Fragment,{children:null===i||void 0===i?void 0:i.map((function(e){return(0,n.jsxs)("div",{onClick:function(){return function(e){t(e)}(e)},className:"flex flex-row items-center cursor-pointer",children:[(null===r||void 0===r?void 0:r.id)===e.id?(0,n.jsx)(p.nRB,{className:"text-green-500"}):(0,n.jsx)(p.b9R,{className:"text-grey-500"}),(0,n.jsx)("span",{children:e.street}),(0,n.jsx)("span",{children:e.postcode})]},e.id)}))})},b=r(2970),w=r(9583);function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);s=!0);}catch(l){o=!0,a=l}finally{try{s||null==r.return||r.return()}finally{if(o)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var A=function(e){var t=e.onSelect,r=e.selectedAddress,i=N((0,y.K1)(),2),s=i[0].user,o=(i[1],N((0,y.K1)(),1)[0].cart,function(){var e=(0,m.useQueryClient)();return(0,m.useMutation)(h.saveAddress,{onSuccess:function(){e.invalidateQueries("addresses"),x.ZP.success("address added successfully!")}})}()),l=(0,a.useState)(!1),u=l[0],c=l[1],d=(0,a.useState)(!1),f=d[0],v=d[1];return null!==r&&!1===u?(0,n.jsxs)("div",{onClick:function(){return c(!u)},className:"flex justify-between items-center p-2 border border-green rounded-8 mt-3 cursor-pointer",children:[(0,n.jsx)("div",{children:r.street}),(0,n.jsx)("div",{className:"text-green",children:(0,n.jsx)(w.FJM,{})})]}):(0,n.jsxs)("div",{className:"border-primary border rounded-8 p-6 mt-2",children:[s&&(0,n.jsx)(g,{onSelect:function(e){c(!1),t(e),v(!1)},selected:r}),(0,n.jsxs)("div",{onClick:function(){t(null),v(!0)},className:"flex flex-row items-center cursor-pointer",children:[null===r?(0,n.jsx)(p.nRB,{className:"text-green-500"}):(0,n.jsx)(p.b9R,{className:"text-primary-500 "}),(0,n.jsx)("span",{children:"Add new address"})]}),(f||null===r)&&(0,n.jsx)(b.Z,{address:void 0,onSave:o.mutate,title:"Shipping address",isBilling:!1})]})},C=r(7039),k=r(2748);function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i=[],s=!0,o=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);s=!0);}catch(l){o=!0,a=l}finally{try{s||null==r.return||r.return()}finally{if(o)throw a}}return i}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var E=function(e){var t=e.isActive,r=(e.onGoNext,Z((0,y.K1)(),2)),i=r[0].user,s=r[1],o=(0,a.useState)(!1),l=(o[0],o[1],(0,C.$G)().t);return i?(0,n.jsx)("div",{className:"border border-1 w-full rounded-8 p-2 ".concat(t?"border-green":"border-grey"),children:(0,n.jsxs)("div",{className:"flex justify-between items-center w-full",children:[(0,n.jsx)("div",{children:(0,n.jsx)("h3",{children:i.name})}),(0,n.jsx)("div",{className:"text-green",children:(0,n.jsx)(w.FJM,{})})]})}):(0,n.jsx)("div",{className:"border border-1 w-full p-2  rounded-8 ".concat(t?"border-primary":"border-grey"),children:(0,n.jsx)("button",{onClick:function(){s({type:k.fv,payload:"login"})},className:"flex justify-between items-center w-full",children:(0,n.jsx)("div",{children:(0,n.jsx)("h3",{children:l("pleaseLogin")})})})})};var I=function(){var e=(0,a.useState)(0),t=e[0],r=e[1],o=(0,a.useState)(null),l=o[0],u=o[1];return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(i.W2,{children:(0,n.jsxs)(i.X2,{children:[(0,n.jsxs)(i.JX,{lg:8,md:6,sm:12,children:[(0,n.jsx)(E,{isActive:0===t,onGoNext:function(){return r(t+1)}}),(0,n.jsx)(A,{onSelect:u,selectedAddress:l}),(0,n.jsx)("div",{children:" payment "})]}),(0,n.jsx)(i.JX,{lg:4,md:6,sm:12,children:(0,n.jsx)(s.Z,{})})]})})})}}},function(e){e.O(0,[13,774,888,179],(function(){return t=9213,e(e.s=t);var t}));var t=e.O();_N_E=t}]);